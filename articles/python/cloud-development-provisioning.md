---
title: Azure でのリソースのプロビジョニング、アクセス、管理
description: Azure リソースの操作に用いられる方法 (Azure portal、Azure CLI、Azure ライブラリ (SDK) など) の概要。
ms.date: 10/06/2020
ms.topic: conceptual
ms.custom: devx-track-python, devx-track-azurecli
ms.openlocfilehash: 6ccbfb953cb28cceec08a70af4431e66e6e8b8ca
ms.sourcegitcommit: 1ddcb0f24d2ae3d1f813ec0f4369865a1c6ef322
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/27/2020
ms.locfileid: "92688861"
---
# <a name="provisioning-accessing-and-managing-resources-on-azure"></a>Azure でのリソースのプロビジョニング、アクセス、管理

[前回の記事: 概要](cloud-development-overview.md)

このシリーズの前回の記事で説明したように、クラウド アプリケーション開発の不可欠な要素は、必要なリソースを Azure 内にプロビジョニングすることです。それらのリソースに、後からコードとデータをデプロイすることができます。 つまり、クラウド アプリケーションの構築は、基本的に、アプリケーションのデプロイ先となるターゲット クラウド コンピューターを構築することから始まります。 (使用可能なリソースの種類を確認するには、[Azure 開発者ガイド](/azure/guides/developer/azure-developer-guide)を参照してください)。

では、そのプロビジョニングは具体的にどう行えばよいのでしょうか。 アプリケーションに使用するリソースを割り当てるよう、Azure に要求するにはどうすればよいのでしょうか。また、そうしたリソースを構成するなど、リソースになんらかの方法でアクセスするにはどうすればよいのでしょうか。 つまり、それらすべてのリソースをあるべき場所に配置するよう Azure 自体に命令するにはどうすればよいかを考えてみたいと思います。

## <a name="means-of-communicating-with-azure"></a>Azure との通信手段

答えは簡単です。 大半のオペレーティング システムと同様、Azure との通信は、ユーザー インターフェイス、コマンド ライン インターフェイス、API という 3 つのルートで行うことができます。

![リソースをプロビジョニングするための Azure とのさまざまな通信手段](media/cloud-development/communication-with-azure.png)

必要な Azure リソースが何であれ、その作成、構成、管理は、これら相補的な方法のいずれかまたはすべてを使用して行うことができます。 実際、開発プロジェクトの過程では、3 つの方法をすべて使用するのが一般的であり、時間がかかっても、それぞれの方法に慣れておく価値はあります。

ポータルの使い方は、個々のサービスのドキュメントで詳しく取り上げられているため、このデベロッパー センターでは主に、Azure ライブラリ を使った Python コードと CLI の使用法を紹介します。

> [!NOTE]
> Python 用 Azure ライブラリは、Azure SDK for Python と呼ばれることもあります。 ただし、Python パッケージ マネージャーである PIP を通じて取得するライブラリ以外の SDK コンポーネントはありません。

## <a name="azure-portal"></a>Azure portal

[Azure portal](https://portal.azure.com) は、細かくカスタマイズできる Azure のブラウザーベースのユーザー インターフェイスです。リソースのプロビジョニングと管理は、あらゆる Azure サービスと共に、Azure portal で行うことができます。 ポータルにアクセスするにはまず、Microsoft アカウントを使用してサインインし、サブスクリプションに無料の Azure アカウントを作成する必要があります。 (サインインしたら、 **?** アイコンを選択し、 **[ガイド ツアーの起動]** を選んで、主なポータル機能についての簡単なチュートリアルを参照できます。)

**長所:** :ユーザー インターフェイスでは、サービスとそのさまざまな構成オプションをすべて簡単に探すことができます。 ローカル ワークステーションに情報は一切保存されないので、構成値を安全に設定することができます。

**短所** :ポータルの操作は手動でのプロセスであり、簡単に自動化することができません。 たとえば、構成に変更を加えるために何の操作を行ったかを思い出したければ、通常は別個のドキュメントに手順を記録しておくことになります。

## <a name="azure-cli"></a>Azure CLI

[Azure CLI](/cli/azure/) は、Azure の[オープンソース](https://github.com/Azure/azure-cli)のコマンド ライン インターフェイスです。 CLI に (`az login` コマンドを使用して) サインインすれば、ポータルと同じタスクを実行できます。
  
**長所:** :スクリプトと出力処理を使用して簡単に自動化できます。 Web アプリのデプロイなど、一般的なタスクを支援するため、複数のリソースをまとめてプロビジョニングする、より高度なコマンドが用意されています。 スクリプトの管理は、ソース管理で行うことができます。

**短所** :ポータルを使用するのに比べて習得の難易度が高く、コマンドはバグのリスクにさらされます。 エラー メッセージが役に立たないこともあります。

通常、Python の開発者にとっては、コマンドの形式が Linux に近い Azure CLI の方が馴染みやすいものの、Azure CLI の代わりに [Azure PowerShell](/powershell/) を使用することもできます。

ローカルの CLI や PowerShell の代わりに、[https://shell.azure.com/](https://shell.azure.com/) から直接 Azure Cloud Shell を使用することもできます。 Cloud Shell は、開いたときに Azure で自動的に認証され、Azure portal を使用する場合と同じ機能があるため便利です。 また、Cloud Shell には、特に 1 つまたは 2 つのコマンドのみを実行する必要がある場合に、ローカルにインストールするのに不便なさまざまなツールがあらかじめ構成されています。

Cloud Shell はローカル環境ではないため、スクリプト化されたオートメーションではなく、ポータルを使用して実行するような、1 回の操作により適しています。 ただし、Cloud Shell でソース リポジトリ (GitHub リポジトリなど) を複製することはできます。 その結果、自動化スクリプトをローカルで開発し、リポジトリに格納し、Cloud Shell でリポジトリを複製して、そこで実行できます。

## <a name="azure-rest-api-and-azure-libraries"></a>Azure REST API と Azure ライブラリ

[Azure REST API](/rest/api/?view=Azure&preserve-view=true) は、Azure のプログラマティック インターフェイスです。Azure のデータ センターはすべて本質的にインターネットに接続されているため、安全な REST over HTTP で提供されます。 すべてのリソースにはそれぞれ、厳重な認証プロトコルとアクセス ポリシーの下で、そのリソース固有の API をサポートする一意の URL が割り当てられます。 (実際、Azure portal と Azure CLI の処理は、結局のところ REST API を通じて実行されます。)

Azure ライブラリ (Azure SDK と呼ばれる場合もあります) には、開発者向けに、REST API の機能を、はるかに便利なプログラミングのパラダイム (クラス、オブジェクトなど) に変換する言語固有のライブラリが用意されています。 Python の場合は、`pip install` を使用することで、個々のライブラリをいつでもインストールでき、スタンドアロンの SDK 全体をインストールする必要はありません。 (その他の言語については、[Azure SDK のダウンロード](https://azure.microsoft.com/downloads/)に関するページを参照してください。)

**長所:** :あらゆる操作を細かく制御できます。たとえば、ある操作の出力を別の操作の入力として使用するという、Azure CLI と比較してはるかに直接的な手段が利用できます。 Python の開発者は、CLI を使わずに、使い慣れた言語パラダイム内で作業できます。 アプリケーション コードから使用して、詳細な管理のシナリオを自動化することもできます。
  
**短所** :通常、1 つの CLI コマンドで実行できる操作に、複数のコード行が必要となり、その分、バグのリスクにさらされます。 Azure CLI のような高度な操作は提供されていません。

## <a name="automatic-on-demand-provisioning"></a>自動オンデマンド プロビジョニング

変化する需要に対応するため、多くの Azure サービスは、スケーリング特性を構成できるようになっています。その場合、必要なときに自動的にリソースを追加でプロビジョニングし、適宜それらの割り当てを解除することができます。 このような自動スケーリングは、複数データ センターのリソースによって支えられたクラウド プラットフォームの主要な利点の 1 つです。 ピーク需要に合わせて環境を設計し、普段利用しないようなキャパシティの料金を支払うのではなく、ベースラインまたは平均的な使用量に合わせて環境を設計し、必要なときにだけ追加機能の料金を支払うだけで済みます。

詳細については、Azure アーキテクチャ センターの「[自動スケール](/azure/architecture/best-practices/auto-scaling)」を参照してください。

## <a name="subscriptions-resource-groups-and-regions"></a>サブスクリプション、リソース グループ、リージョン

Azure のリソース モデルでは、時間が経つにつれて、多数の Azure サービス全体で、さまざまなアプリケーション用にプロビジョニングするリソースの数も種類も多くなることが予想されます。 こうしたリソースを整理するために、次の 3 つのレベルの階層を利用できます。

1. **サブスクリプション** : Azure サブスクリプションにはそれぞれ、独自の課金アカウントがあり、多くの場合、組織内の個別のチームまたは部門を表します。 一般に、特定のアプリケーションに必要なすべてのリソースは、共有された認証などの機能を有効に活用できるよう、同じサブスクリプション内にプロビジョニングします。 ただし、すべてのリソースには、パブリック URL と必要な承認トークンを通じてアクセスできるため、当然、リソースを複数のサブスクリプションに分散させることも可能です。

1. **リソース グループ** : サブスクリプション内では、リソース グループは、グループとして管理できる、他のリソースのコンテナーです。 (このような理由から、リソース グループは通常、特定のプロジェクトに関連します。)実際、リソースをプロビジョニングする際は必ず、その所属先のグループを指定する必要があります。 通常、新しいプロジェクトで最初に行う手順は、適切なリソース グループの作成です。 また、リソース グループを削除すれば、そこに含まれているすべてのリソースの割り当てが解除されます。それぞれのリソースを個別に削除する必要はありません。 リソース グループの整理を怠り、どのリソースがどのプロジェクトに属しているかを忘れてしまうと、後でさまざまな問題が生じるおそれがあるので注意してください。

1. **リソースの名前付け** : リソース グループ内では、リソースの特徴やリソース間の関係を表すために好きな名前付けの方針を使用できます。 名前はリソースの URL に使用されることも少なくないので、使用できる文字には制限があります。 (たとえば、アルファベットと数字しか使用できない場合もあれば、ハイフンとアンダースコアが使用できる場合もあります。)

Azure を使用していくうちに、自分がやりやすいリソースの整理方法が見つかります。また、サブスクリプション、リソース グループ、および個々のリソースに対する独自の命名規則もできてくるでしょう。

### <a name="regions-and-geographies"></a>リージョンと地理

リソース グループの主な特徴は、常に特定の Azure " *リージョン* "、つまり特定のデータ センターの場所に関連付けられていることです。 同じグループに属しているすべてのリソースは、そのデータ センターに併置されるため、別々のリージョンに配置された場合よりも、はるかに効率よく連携することができます。 多くの場合、ユーザーに最も近いリージョンが開発者によって選択されるため、アプリケーションの応答性が最適化されます。 グローバルな顧客ベースに対するサービスを向上させることができるよう、Azure には、アプリケーションやデータベースのコピーを複数のリージョン間で同期する geo レプリケーション機能が用意されています。

サブスクリプションの作成先の " *地理的な場所* " によって現地の法律や規制は異なります。そのために、特定のリージョンにしかアクセスできなかったり、それらのリージョンで一部の Azure サービスがサポートされなかったりする場合もあります。 詳細については、「[Azure グローバル インフラストラクチャ](https://azure.microsoft.com/global-infrastructure/)」を参照してください。

## <a name="next-step"></a>次のステップ

> [!div class="nextstepaction"]
> [Azure 開発フロー >>>](cloud-development-flow.md)
